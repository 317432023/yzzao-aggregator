接收周期性字节数据            TCP
转换周期性数据为对象        
转发周期性数据JSON          HTTP
接收MES JSON指令            HTTP
转换MES指令为字节数据    
转发MES指令                       TCP


一、算法
CRC 是先调入一值是全“1”的 16 位寄存器，然后调用一过程将消息中连续的 8 位字节各当前寄存器中的值进行处理。仅每个字符中的 8Bit 数据对 CRC 有效，起始位和停止位以及奇偶校验位均无效。

CRC 校验字节的生成步骤如下:

1) 装一个 16 位寄存器，所有数位均为 1。
2) 取被校验串的一个字节与 16 位寄存器的高位字节进行“异或”运算。运算结果放入这个 16 位寄存器。
3) 把这个 16 寄存器向右移一位。
4) 若向右(标记位)移出的数位是 1，则生成多项式 1010 0000 0000 0001 和这个寄存器进行“异或”运算；若向右移出的数位是 0，则返回步骤(3)。
5) 重复步骤(3)和步骤(4)，直至移出 8 位。
6) 取被校验串的下一个字节
7) 重复步骤(3) ~ 步骤(6)，直至被校验串的所有字节均与 16 位寄存器进行“异或”运算，并移位8 次。
8) 这个 16 位寄存器的内容即 2 字节 CRC 错误校验码
--------------------- 
作者：暗夜无月 
来源：CSDN 
原文：https://blog.csdn.net/u010870890/article/details/51915367?utm_source=copy 
版权声明：本文为博主原创文章，转载请附上博文链接！